{% extends "application/0_index.html" %}

{% block title %}Строевая записка{% endblock %}

{% block content %}
        <div class="row text-center">
        {% if perms.application.user_main_call_center_city %}
            <h3> Сил и средств противопожарной службы города {{ userinfo.city.name }} на <span>{{ date_insert }}</span></h3>
        {% elif perms.application.user_fire_department_call_center %}
            <h3> Сил и средств {{ userinfo.department.unique_id }} города {{ userinfo.city.name }} на <span>{{ date_insert }}</span></h3>
        {% endif %}
        </div>

        <div class="row">
            <div class="col-md-12">
            {% if line_note_staff_base %}
                <div style="text-align: right;">
                    <a class="btn btn-secondary" href="/static/report/Отчет на {{ date_insert }}.xlsx" download="">Скачать</a>
                </div>

            <table class="table table-striped table-bordered table-responsive-md" style="margin-top: 25px;">
                <thead>
                    <tr>

                        <th rowspan="2">Наименование пожарных подразделений</th>
                        <th rowspan="2">Штат ПЧ (СПЧ,ПП)</th>
                        <th rowspan="2">В карауле по списку л/с</th>
                        <th colspan="7">Налицо личного состава</th>

                    </tr>
                     <tr>
                          <th>Всего</th>
                          <th>Расчет</th>
                          <th>Начальники караулов</th>
                          <th>Командиры отделений</th>
                          <th>Водители</th>
                          <th>Пожарные</th>
                          <th>Диспетчеров (радиотелефонистов)</th>

                     </tr>
                </thead>
                <tbody>
                {% for rep in report %}
                    <tr>
                        <th scope="row">{{rep.dep_unique_id}}</th>
                        <td>{{ rep.num_fighter }}</td>
                        <td>{{ rep.karaul_list }}</td>
                        <td>{{ rep.karaul_all }}</td>
                        <td>{{ rep.karaul_fighter }}</td>
                        <td>{{ rep.head }}</td>
                        <td>{{ rep.commander }}</td>
                        <td>{{ rep.drivers }}</td>
                        <td>{{ rep.fire_fighter }}</td>
                        <td>{{ rep.call_assistant }}</td>

                    </tr>
                {% endfor %}

                <tr></tr>
                </tbody>
            </table>
            <table class="table table-striped table-bordered table-responsive-md">
            <thead>
                <tr>
                    <th rowspan="2">Наименование пожарных подразделений</th>
                    <th rowspan="2">Газодымозащитники/ аппараты</th>
                    <th colspan="4">Отсутствуют</th>
                </tr>
                <tr>
                    <th>Отпуск учебный/декрет.</th>
                    <th>Больные</th>
                    <th>Командировка</th>
                    <th>Другие причины</th>
                </tr>
            </thead>
            <tbody>
            {% for rep in report %}
                <tr>
                    <th scope="row">{{rep.dep_unique_id}}</th>
                    <td>{{ rep.gdzs }}</td>
                    <td>{{ rep.vacation }}</td>
                    <td>{{ rep.sick }}</td>
                    <td>{{ rep.business_trip }}</td>
                    <td>{{ rep.others }}</td>
                </tr>
            {% endfor %}
            </tbody>
            </table>
            {% else %}
             <h3>Нету данных по ЛС</h3>
            {% endif %}

            </div>
            <div class="col-md-12">
            {% if line_note_transport %}
                <h2 style="text-align: center;">Пожарная техника</h2>
                <table class="table table-striped table-bordered table-responsive-md">
                <thead>
                    <tr>
                        <th rowspan="2">Наименование пожарных подразделений</th>
                        <th colspan="2">В расчете</th>
                        <th colspan="2">В резерве</th>
                        <th colspan="2">На ремонте</th>
                    </tr>
                    <tr>
                        <th>Тип основного пожарного автомобиля</th>
                        <th>Марка специального пожарного автомобиля</th>
                        <th>Тип основного пожарного автомобиля</th>
                        <th>Марка специального пожарного автомобиля</th>
                        <th>Тип основного пожарного автомобиля</th>
                        <th>Марка специального пожарного автомобиля</th>
                    </tr>
                </thead>
                <tbody>
                {% for rep in report %}
                    <tr>
                        <th scope="row" {% if rep.tab_row > -1 %} rowspan="{{ rep.tab_row }}" {% endif %}>{{rep.dep_unique_id}}</th>
                        <td>{{ rep.counting_brand | first}}</td>
                        <td>{{ rep.counting_model | first}}</td>
                        <td>{{ rep.reserve_brand | first}}</td>
                        <td>{{ rep.reserve_model | first}}</td>
                        <td>{{ rep.renovation_brand | first}}</td>
                        <td>{{ rep.renovation_model | first}}</td>
                    </tr>
                    {% if rep.tab_row > -1  %}
                        {% with ''|center:rep.tab_row as range %}
                        {% for _ in range %}
                            {% with forloop.counter as out_loop %}
                                {% if out_loop > 1 %}
                                <tr>
                                    <td>
                                        {% for foo in rep.counting_brand %}
                                            {% if forloop.counter  == out_loop%}
                                                {{ foo }} {{ forloop.counter }} {{ out_loop }}
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                    <td>
                                        {% for foo in rep.counting_model %}
                                            {% if forloop.counter  == out_loop%}
                                                {{ foo }}
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                    <td>
                                        {% for foo in rep.reserve_brand %}
                                            {% if forloop.counter  == out_loop%}
                                                {{ foo }}
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                    <td>
                                        {% for foo in rep.reserve_model %}
                                            {% if forloop.counter  == out_loop%}
                                                {{ foo }}
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                    <td>
                                        {% for foo in rep.renovation_brand %}
                                            {% if forloop.counter  == out_loop%}
                                                {{ foo }}
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                    <td>
                                        {% for foo in rep.renovation_model %}
                                            {% if forloop.counter  == out_loop %}
                                                {{ foo }}
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                </tr>
                                {% endif %}
                            {% endwith %}
                        {% endfor %}
                        {% endwith %}
                    {% endif %}

                {% endfor %}
                </tbody>
                </table>

            {% else %}
             <h3>Нету данных по ЛС</h3>
            {% endif %}

            </div>
 </div>
{% endblock %}